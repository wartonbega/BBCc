
// --------- STRUCTURE TEST ----------
// struct Bstruct {
//     Int toto,
//     Int b,
// }
// 
// func BstructFree(Bstruct this) Void {
//     // Do nothing
// }
// 
// struct Tstruct {
//     Bstruct a,
//     Int b,
// }
// 
// func TstructFree (Tstruct this) Void {
//     if this._count == 0 {
//         BstructFree(this.a)
//         free this
//     }
// }
// 
// 
// func toto (Tstruct x) Int {
//     x.a.toto
// }
// 
// func main () !Int {
//     let a = @Tstruct {
//         a = @Bstruct { toto = 69, b = 67 },
//         b = 87
//     }
//     toto(a)
// }


// --------- POLYMORPHISME TEST ----------
// func <Type: Add> test (Type x) Type {
//     x + x
// }
//
// func main () !Int {
//     let a = test(1)
//     let b = test(false)
//     0
// }


// --------- CONDITION TEST ----------
// func main () !Int {
//     let a = if 2 == 2 {
//              3
//          } else {
//              4
//          }
//     a
// }


// --------- TRAIT TEST ----------
struct Vec2 {
    Int x,
    Int y
}

func Vec2Free (Vec2 this) Void {
    if (this != null) {
        if (this._count == 0) {
            free this
        }
    }
}


// implement Add for Vec2 {
//     func Addition (Vec2 this, Vec2 other) Vec2 {
//         @Vec2 {
//             x = thix.x + other.x
//             y = this.y + other.y
//         }
//     }
// }
// 

func Addition (Vec2 this, Vec2 other) Vec2 {
    @Vec2 {
        x = this.x + other.x,
        y = this.y + other.y
    }
}

func test () Vec2 {
    @Vec2 {
        x = 87,
        y = 2
    }
}

func main () !Int {
    let a = test()
    let b = test()
    2
}

// --------- BASIC TEST ----------
// func main () !Int {
//     let a = 1 + 2
//     a
// }